---
title: 'Pempel Dashboard'
summary: 'Application mobile pour gestion re√ßus √©lectroniques construite avec Expo et React Native, avec support hors ligne et authentification mTLS'
image: '/images/projects/pempel-dashboard.svg'
author: 'Anders & A-Cube S.r.l.'
publishedAt: '2025-07-15'
tags: ['Expo', 'React Native', 'TypeScript', 'Zustand', 'i18next', 'Mobile', 'E-Receipts']
---

## Vue d'ensemble

**Pempel Dashboard** est une application mobile production-ready pour la gestion de re√ßus √©lectroniques, construite sur Expo 53 et React Native 0.79. Elle fournit une exp√©rience offline-first transparente avec authentification mTLS s√©curis√©e, internationalisation compl√®te et standards de qualit√© code enterprise-grade.

### R√©alisations Cl√©s

- üì± **Stack Expo Moderne**: Expo 53, React Native 0.79, Expo Router pour navigation file-based
- üîê **Authentification S√©curis√©e**: Authentification certificat client mTLS via expo-mutual-tls
- üíæ **Architecture Offline-First**: Cache IndexedDB avec strat√©gies sync intelligentes
- üåç **Internationalisation Compl√®te**: i18next avec support multilingue complet
- üìä **Gestion √âtat**: Zustand pour gestion √©tat l√©g√®re et scalable
- ‚ö° **Performances Optimis√©es**: FlashList, virtualisation React Table, rendus optimis√©s
- üõ°Ô∏è **Qualit√© Code**: R√®gles ESLint compl√®tes, Prettier, TypeScript strict mode
- üîÑ **Git Hooks**: Husky + lint-staged pour contr√¥les qualit√© pr√©-commit

---

## Architecture Technique

### Conception du Syst√®me

Expo Router (file-based) g√®re navigation avec app/(tabs)/* et app/modal/*. Couche √©tat Zustand pour Re√ßus, Auth, UI, Sync et Param√®tres. Couche donn√©es avec E-Receipt SDK, SQLite et AsyncStorage. Couche s√©curit√© avec expo-mutual-tls, Secure Store et Keychain/Keystore.

### Technologies Core

**√âcosyst√®me Expo**:
- Expo 53: SDK Expo le plus r√©cent avec fonctionnalit√©s modernes
- Expo Router 5.1: Routing file-based avec layouts et navigation
- Expo SQLite: Base de donn√©es locale pour stockage re√ßus hors ligne
- Expo Secure Store: Stockage credentials chiffr√©
- Expo File System: Cache PDF re√ßus
- Expo Haptics: Feedback tactile pour meilleure UX

**Stack React Native**:
- React 19: Fonctionnalit√©s et optimisations React les plus r√©centes
- React Native 0.79: React Native moderne avec renderer Fabric
- React Hook Form: Validation formulaire performante
- Lucide React Native: Iconographie consistante

**Gestion √âtat & Donn√©es**:
- Zustand: Gestion √©tat avec boilerplate minimal
- @a-cube-io/ereceipts-js-sdk: Op√©rations donn√©es re√ßus
- i18next + react-i18next: Framework internationalisation

---

## Fonctionnalit√©s Core

### 1. Gestion Re√ßus

**Liste Re√ßus** avec virtualisation:
```typescript
import { FlashList } from '@shopify/flash-list'
import { useReceiptsStore } from '@/store/receipts'

export default function ReceiptsScreen() {
  const { receipts, loading, fetchReceipts } = useReceiptsStore()

  return (
    <FlashList
      data={receipts}
      estimatedItemSize={120}
      renderItem={({ item }) => <ReceiptCard receipt={item} />}
      onRefresh={fetchReceipts}
      refreshing={loading}
    />
  )
}
```

**D√©tails Re√ßu** avec visualisation PDF:
R√©cup√©ration re√ßu via ID avec possibilit√© t√©l√©chargement et partage PDF. Int√©gration expo-file-system pour gestion fichiers locale et expo-sharing pour partage multi-app.

### 2. Flux Authentification mTLS

**Configuration Certificat**:
```typescript
import ExpoMutualTls from '@a-cube-io/expo-mutual-tls'
import * as SecureStore from 'expo-secure-store'

export const setupMTLS = async (credentials: Credentials) => {
  try {
    // Configure module mTLS
    await ExpoMutualTls.configureP12('pempel-app', true)

    // Stocke certificat de mani√®re s√©curis√©e
    const certificateData = await fetchUserCertificate(credentials)
    await ExpoMutualTls.storeP12(
      certificateData.p12Base64,
      certificateData.password
    )

    // Stocke metadata dans secure storage
    await SecureStore.setItemAsync('cert_expiry', certificateData.expiryDate)
    await SecureStore.setItemAsync('user_id', credentials.userId)

    return { success: true }
  } catch (error) {
    console.error('Configuration mTLS √©chou√©e:', error)
    return { success: false, error }
  }
}
```

**Appels API Authentifi√©s**:
SDK EReceipts utilise automatiquement mTLS pour toutes les requ√™tes avec configuration timeout 30s et gestion erreurs compl√®te.

### 3. Synchronisation Donn√©es Offline-First

**Strat√©gie Sync**:
```typescript
export const useSyncManager = () => {
  const { lastSync, isSyncing, setLastSync } = useSyncStore()

  const syncReceipts = async () => {
    const netInfo = await NetInfo.fetch()

    if (!netInfo.isConnected) {
      return { success: false, reason: 'offline' }
    }

    setIsSyncing(true)

    try {
      // R√©cup√®re derniers re√ßus du serveur
      const serverReceipts = await receiptsSDK.getReceipts({
        since: lastSync
      })

      // Met √† jour cache local
      await db.receipts.bulkPut(serverReceipts)

      // Charge modifications en attente
      const pendingChanges = await db.pendingChanges.toArray()
      for (const change of pendingChanges) {
        await uploadChange(change)
        await db.pendingChanges.delete(change.id)
      }

      setLastSync(new Date())
      return { success: true }
    } finally {
      setIsSyncing(false)
    }
  }

  return { syncReceipts, lastSync, isSyncing }
}
```

### 4. Internationalisation

**Configuration Traductions**:
```typescript
import i18n from 'i18next'
import { initReactI18next } from 'react-i18next'
import * as Localization from 'expo-localization'

i18n
  .use(initReactI18next)
  .init({
    compatibilityJSON: 'v3',
    resources: {
      en: { translation: require('./locales/en.json') },
      it: { translation: require('./locales/it.json') },
      fr: { translation: require('./locales/fr.json') }
    },
    lng: Localization.locale.split('-')[0],
    fallbackLng: 'en',
    interpolation: { escapeValue: false }
  })
```

---

## Qualit√© Code & D√©veloppement

### Scripts Qualit√©

**Tooling Qualit√© Complet**:
- `lint`: Linting complet code
- `lint:fix`: Fix automatique probl√®mes
- `lint:check`: Linting avec z√©ro warning
- `lint:unused`: Suppression imports inutilis√©s
- `format`: Formatage Prettier
- `type:check`: V√©rification TypeScript
- `quality:check`: Contr√¥les qualit√© complets
- `quality:fix`: Fix automatique tous probl√®mes
- `quality:full`: Fix et v√©rification complets

### Configuration ESLint

**R√®gles Linting Compl√®tes**:
- @typescript-eslint: R√®gles sp√©cifiques TypeScript
- react-hooks: Best practices React hooks
- react-native: R√®gles sp√©cifiques React Native
- react-native-a11y: Validation accessibilit√©
- react-perf: Contr√¥les optimisation performances
- unused-imports: D√©tection imports/variables inutilis√©s
- simple-import-sort: Tri imports consistant

### Git Hooks avec Husky

**Quality Gates Pr√©-commit**:
```json
{
  "lint-staged": {
    "*.{ts,tsx,js,jsx}": [
      "eslint --fix",
      "prettier --write",
      "tsc-files --noEmit"
    ]
  }
}
```

---

## Optimisations Performances

### Int√©gration FlashList

Remplacement FlatList avec FlashList pour rendu 10x plus rapide. Avant (FlatList): ~16ms par frame pour 1000 items. Apr√®s (FlashList): ~2ms par frame pour 1000 items.

### Virtualisation React Table

Gestion efficace grands datasets avec @tanstack/react-virtual. Rendu uniquement √©l√©ments visibles avec overscan 5 items. Calcul dynamique positions √©l√©ments avec estimateSize.

### Optimisation Rendu

**Strat√©gie M√©mo√Øsation**:
```typescript
import { memo, useMemo, useCallback } from 'react'

const ReceiptCard = memo(({ receipt, onPress }) => {
  const formattedDate = useMemo(
    () => formatDate(receipt.date),
    [receipt.date]
  )

  const handlePress = useCallback(() => {
    onPress(receipt.id)
  }, [receipt.id, onPress])

  return (
    <Pressable onPress={handlePress}>
      <Text>{receipt.merchantName}</Text>
      <Text>{formattedDate}</Text>
    </Pressable>
  )
})
```

---

## Stack Technique R√©capitulatif

### Framework Core
- Expo 53.0 - Framework React Native universel
- React Native 0.79.5 - Framework mobile
- TypeScript 5.8.3 - D√©veloppement type-safe
- Expo Router 5.1.4 - Navigation file-based

### √âtat & Donn√©es
- Zustand 5.0.7 - Gestion √©tat
- @a-cube-io/ereceipts-js-sdk 0.1.0 - Op√©rations re√ßus
- i18next 25.4.0 - Internationalisation
- React Hook Form 7.62.0 - Validation formulaire
- Zod 4.0.17 - Validation runtime

### UI & Performances
- @shopify/flash-list 2.0.2 - Listes haute-performance
- @tanstack/react-table 8.21.3 - Tableaux donn√©es
- @tanstack/react-virtual 3.13.12 - Virtualisation
- lucide-react-native 0.536.0 - Ic√¥nes

### Stockage & S√©curit√©
- expo-secure-store 14.2.3 - Stockage chiffr√©
- expo-sqlite 15.2.14 - Base de donn√©es locale
- @a-cube-io/expo-mutual-tls 1.0.5 - Authentification mTLS

---

## Conclusion

**Pempel Dashboard** d√©montre d√©veloppement mobile production-ready avec Expo et React Native, atteignant qualit√© enterprise-grade gr√¢ce √† tooling complet et best practices. Le projet √©quilibre avec succ√®s performances, s√©curit√© et exp√©rience d√©veloppeur.

**Licence**: Propri√©taire (A-Cube S.r.l.)
