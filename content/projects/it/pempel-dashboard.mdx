---
title: 'Pempel Dashboard'
summary: 'Applicazione mobile per gestione scontrini elettronici costruita con Expo e React Native, con supporto offline e autenticazione mTLS'
image: '/images/projects/pempel-dashboard.svg'
author: 'Anders & A-Cube S.r.l.'
publishedAt: '2025-07-15'
tags: ['Expo', 'React Native', 'TypeScript', 'Zustand', 'i18next', 'Mobile', 'E-Receipts']
---

## Panoramica

**Pempel Dashboard** √® un'applicazione mobile production-ready per la gestione di scontrini elettronici, costruita su Expo 53 e React Native 0.79. Fornisce un'esperienza offline-first seamless con autenticazione mTLS sicura, internazionalizzazione completa e standard di qualit√† codice enterprise-grade.

### Risultati Chiave

- üì± **Stack Expo Moderno**: Expo 53, React Native 0.79, Expo Router per navigazione file-based
- üîê **Autenticazione Sicura**: Autenticazione certificato client mTLS via expo-mutual-tls
- üíæ **Architettura Offline-First**: Cache IndexedDB con strategie sync intelligenti
- üåç **Internazionalizzazione Completa**: i18next con supporto multilingua completo
- üìä **Gestione Stato**: Zustand per gestione stato leggera e scalabile
- ‚ö° **Prestazioni Ottimizzate**: FlashList, virtualizzazione React Table, render ottimizzati
- üõ°Ô∏è **Qualit√† Codice**: Regole ESLint complete, Prettier, TypeScript strict mode
- üîÑ **Git Hooks**: Husky + lint-staged per controlli qualit√† pre-commit

---

## Architettura Tecnica

### Design del Sistema

Expo Router (file-based) gestisce navigazione con app/(tabs)/* e app/modal/*. Layer stato Zustand per Scontrini, Auth, UI, Sync e Impostazioni. Layer dati con E-Receipt SDK, SQLite e AsyncStorage. Layer sicurezza con expo-mutual-tls, Secure Store e Keychain/Keystore.

### Tecnologie Core

**Ecosistema Expo**:
- Expo 53: SDK Expo pi√π recente con funzionalit√† moderne
- Expo Router 5.1: Routing file-based con layout e navigazione
- Expo SQLite: Database locale per storage scontrini offline
- Expo Secure Store: Storage credenziali criptato
- Expo File System: Cache PDF scontrini
- Expo Haptics: Feedback tattile per UX migliore

**Stack React Native**:
- React 19: Funzionalit√† e ottimizzazioni React pi√π recenti
- React Native 0.79: React Native moderno con renderer Fabric
- React Hook Form: Validazione form performante
- Lucide React Native: Iconografia consistente

**Gestione Stato & Dati**:
- Zustand: Gestione stato con boilerplate minimo
- @a-cube-io/ereceipts-js-sdk: Operazioni dati scontrini
- i18next + react-i18next: Framework internazionalizzazione

---

## Funzionalit√† Core

### 1. Gestione Scontrini

**Lista Scontrini** con virtualizzazione:
```typescript
import { FlashList } from '@shopify/flash-list'
import { useReceiptsStore } from '@/store/receipts'

export default function ReceiptsScreen() {
  const { receipts, loading, fetchReceipts } = useReceiptsStore()

  return (
    <FlashList
      data={receipts}
      estimatedItemSize={120}
      renderItem={({ item }) => <ReceiptCard receipt={item} />}
      onRefresh={fetchReceipts}
      refreshing={loading}
    />
  )
}
```

**Dettagli Scontrino** con visualizzazione PDF:
Recupero scontrino tramite ID con possibilit√† download e condivisione PDF. Integrazione expo-file-system per gestione file locale e expo-sharing per condivisione multi-app.

### 2. Flusso Autenticazione mTLS

**Setup Certificato**:
```typescript
import ExpoMutualTls from '@a-cube-io/expo-mutual-tls'
import * as SecureStore from 'expo-secure-store'

export const setupMTLS = async (credentials: Credentials) => {
  try {
    // Configura modulo mTLS
    await ExpoMutualTls.configureP12('pempel-app', true)

    // Memorizza certificato in modo sicuro
    const certificateData = await fetchUserCertificate(credentials)
    await ExpoMutualTls.storeP12(
      certificateData.p12Base64,
      certificateData.password
    )

    // Memorizza metadata in secure storage
    await SecureStore.setItemAsync('cert_expiry', certificateData.expiryDate)
    await SecureStore.setItemAsync('user_id', credentials.userId)

    return { success: true }
  } catch (error) {
    console.error('Setup mTLS fallito:', error)
    return { success: false, error }
  }
}
```

**Chiamate API Autenticate**:
SDK EReceipts usa automaticamente mTLS per tutte le richieste con configurazione timeout 30s e gestione errori completa.

### 3. Sincronizzazione Dati Offline-First

**Strategia Sync**:
```typescript
export const useSyncManager = () => {
  const { lastSync, isSyncing, setLastSync } = useSyncStore()

  const syncReceipts = async () => {
    const netInfo = await NetInfo.fetch()

    if (!netInfo.isConnected) {
      return { success: false, reason: 'offline' }
    }

    setIsSyncing(true)

    try {
      // Recupera ultimi scontrini da server
      const serverReceipts = await receiptsSDK.getReceipts({
        since: lastSync
      })

      // Aggiorna cache locale
      await db.receipts.bulkPut(serverReceipts)

      // Carica modifiche pending
      const pendingChanges = await db.pendingChanges.toArray()
      for (const change of pendingChanges) {
        await uploadChange(change)
        await db.pendingChanges.delete(change.id)
      }

      setLastSync(new Date())
      return { success: true }
    } finally {
      setIsSyncing(false)
    }
  }

  return { syncReceipts, lastSync, isSyncing }
}
```

### 4. Internazionalizzazione

**Setup Traduzioni**:
```typescript
import i18n from 'i18next'
import { initReactI18next } from 'react-i18next'
import * as Localization from 'expo-localization'

i18n
  .use(initReactI18next)
  .init({
    compatibilityJSON: 'v3',
    resources: {
      en: { translation: require('./locales/en.json') },
      it: { translation: require('./locales/it.json') },
      fr: { translation: require('./locales/fr.json') }
    },
    lng: Localization.locale.split('-')[0],
    fallbackLng: 'en',
    interpolation: { escapeValue: false }
  })
```

---

## Qualit√† Codice & Sviluppo

### Script Qualit√†

**Tooling Qualit√† Completo**:
- `lint`: Linting completo codice
- `lint:fix`: Fix automatico problemi
- `lint:check`: Linting con zero warning
- `lint:unused`: Rimozione import inutilizzati
- `format`: Formattazione Prettier
- `type:check`: Verifica TypeScript
- `quality:check`: Controlli qualit√† completi
- `quality:fix`: Fix automatico tutti i problemi
- `quality:full`: Fix e verifica completi

### Configurazione ESLint

**Regole Linting Complete**:
- @typescript-eslint: Regole specifiche TypeScript
- react-hooks: Best practices React hooks
- react-native: Regole specifiche React Native
- react-native-a11y: Validazione accessibilit√†
- react-perf: Controlli ottimizzazione prestazioni
- unused-imports: Rilevamento import/variabili inutilizzati
- simple-import-sort: Ordinamento import consistente

### Git Hooks con Husky

**Quality Gates Pre-commit**:
```json
{
  "lint-staged": {
    "*.{ts,tsx,js,jsx}": [
      "eslint --fix",
      "prettier --write",
      "tsc-files --noEmit"
    ]
  }
}
```

---

## Ottimizzazioni Prestazioni

### Integrazione FlashList

Sostituzione FlatList con FlashList per rendering 10x pi√π veloce. Prima (FlatList): ~16ms per frame per 1000 items. Dopo (FlashList): ~2ms per frame per 1000 items.

### Virtualizzazione React Table

Gestione efficiente grandi dataset con @tanstack/react-virtual. Rendering solo elementi visibili con overscan 5 items. Calcolo dinamico posizioni elementi con estimateSize.

### Ottimizzazione Render

**Strategia Memoizzazione**:
```typescript
import { memo, useMemo, useCallback } from 'react'

const ReceiptCard = memo(({ receipt, onPress }) => {
  const formattedDate = useMemo(
    () => formatDate(receipt.date),
    [receipt.date]
  )

  const handlePress = useCallback(() => {
    onPress(receipt.id)
  }, [receipt.id, onPress])

  return (
    <Pressable onPress={handlePress}>
      <Text>{receipt.merchantName}</Text>
      <Text>{formattedDate}</Text>
    </Pressable>
  )
})
```

---

## Stack Tecnico Riepilogativo

### Framework Core
- Expo 53.0 - Framework React Native universale
- React Native 0.79.5 - Framework mobile
- TypeScript 5.8.3 - Sviluppo type-safe
- Expo Router 5.1.4 - Navigazione file-based

### Stato & Dati
- Zustand 5.0.7 - Gestione stato
- @a-cube-io/ereceipts-js-sdk 0.1.0 - Operazioni scontrini
- i18next 25.4.0 - Internazionalizzazione
- React Hook Form 7.62.0 - Validazione form
- Zod 4.0.17 - Validazione runtime

### UI & Prestazioni
- @shopify/flash-list 2.0.2 - Liste high-performance
- @tanstack/react-table 8.21.3 - Tabelle dati
- @tanstack/react-virtual 3.13.12 - Virtualizzazione
- lucide-react-native 0.536.0 - Icone

### Storage & Sicurezza
- expo-secure-store 14.2.3 - Storage criptato
- expo-sqlite 15.2.14 - Database locale
- @a-cube-io/expo-mutual-tls 1.0.5 - Autenticazione mTLS

---

## Conclusione

**Pempel Dashboard** dimostra sviluppo mobile production-ready con Expo e React Native, raggiungendo qualit√† enterprise-grade attraverso tooling completo e best practices. Il progetto bilancia con successo prestazioni, sicurezza ed esperienza sviluppatore.

**Licenza**: Proprietaria (A-Cube S.r.l.)
